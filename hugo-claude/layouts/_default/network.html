{{ define "main" }}
{{ $data := .Site.Data.metrics }}

<!-- Hero Section with Background Image -->
<section class="relative min-h-[60vh] flex items-center justify-center overflow-hidden">
  <!-- Hero Background Image -->
  <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
    {{ partial "hero-bg.html" (dict "src" "images/network/hero.png") }}
  </div>

  <!-- Content -->
  <div class="relative z-10 text-center px-4 max-w-5xl mx-auto pt-16">
    <div class="flex items-center justify-center gap-3 mb-6">
      <span class="text-6xl md:text-7xl">üîó</span>
    </div>
    <h1 class="text-4xl md:text-6xl lg:text-7xl font-heading font-bold mb-6 tracking-tight">
      <span class="text-gradient-management">–ö—Ç–æ —Å –∫–µ–º —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç</span>
    </h1>
    <p class="text-lg md:text-xl text-slate-400 max-w-3xl mx-auto leading-relaxed">
      –ò –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ
    </p>
  </div>
</section>

<!-- Network Stats -->
<section class="relative py-16 px-4">
  <div class="container mx-auto max-w-7xl">

    <!-- Network Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-16">
      <div class="bento-card p-6 text-center">
        <div class="text-4xl mb-3">üë•</div>
        <div class="font-data text-4xl font-bold text-telegram-blue mb-2">{{ $data.total_contributors }}</div>
        <div class="text-slate-400 text-sm">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
      </div>
      <div class="bento-card p-6 text-center">
        <div class="text-4xl mb-3">üí¨</div>
        <div class="font-data text-4xl font-bold text-ai-purple-start mb-2">{{ $data.total_messages | lang.FormatNumber 0 }}</div>
        <div class="text-slate-400 text-sm">–°–æ–æ–±—â–µ–Ω–∏–π</div>
      </div>
      <div class="bento-card p-6 text-center">
        <div class="text-4xl mb-3">üî•</div>
        <div class="font-data text-4xl font-bold text-management-orange-start mb-2">{{ len $data.big_four }}</div>
        <div class="text-slate-400 text-sm">–ö–ª—é—á–µ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
      </div>
      <div class="bento-card p-6 text-center">
        <div class="text-4xl mb-3">üåê</div>
        <div class="font-data text-4xl font-bold text-green-400 mb-2">{{ $data.active_days }}</div>
        <div class="text-slate-400 text-sm">–î–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
      </div>
    </div>
  </div>
</section>

<!-- Network Visualization -->
<section class="relative py-16 px-4 bg-gradient-to-b from-transparent to-deep-space/50">
  <div class="container mx-auto max-w-7xl">
    <h2 class="text-3xl md:text-4xl font-heading font-bold text-center mb-4 text-starlight">
      –ö–∞—Ä—Ç–∞ <span class="text-gradient-ai">–°–≤—è–∑–µ–π</span>
    </h2>
    <p class="text-center text-slate-400 mb-12 max-w-3xl mx-auto">
      –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ ‚Äì –æ—Ç —è–¥—Ä–∞ –∫ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏
    </p>

    <!-- SVG Visualization -->
    <div class="bento-card p-8 mb-12">
      <div id="network-viz" class="relative" style="height: 600px; min-height: 500px;">
        <!-- SVG Network Visualization -->
        <svg id="network-svg" width="100%" height="100%" class="rounded-lg">
          <!-- Network will be rendered here via JavaScript -->
        </svg>
      </div>
    </div>

    <!-- Level Details -->
    <div class="space-y-8">
      <!-- Level 0: Core -->
      <div class="bento-card p-8 border-l-4 border-yellow-400">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üéØ</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–£—Ä–æ–≤–µ–Ω—å 0: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –Ø–¥—Ä–æ</h3>
            <p class="text-slate-400 text-sm mb-3">–ë–æ–ª—å—à–∞—è –ß–µ—Ç–≤—ë—Ä–∫–∞ ‚Äì –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞</p>
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <p class="text-slate-300 mb-4">
              4 —á–µ–ª–æ–≤–µ–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ü–µ–Ω—Ç—Ä –≤—Å–µ–π —Å–µ—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π. –û–Ω–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ ‚Äì –æ–Ω–∏ —Å–≤—è–∑—ã–≤–∞—é—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.
            </p>
            <ul class="space-y-2 text-slate-300 text-sm">
              <li class="flex items-start gap-2">
                <span class="text-yellow-400">‚Ä¢</span>
                <span><strong>3 132</strong> –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –≤–Ω—É—Ç—Ä–∏ —è–¥—Ä–∞ (29% –æ—Ç –≤—Å–µ–≥–æ —á–∞—Ç–∞!)</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-yellow-400">‚Ä¢</span>
                <span>–ü–æ–ª–Ω–æ—Å–≤—è–∑–Ω—ã–π –≥—Ä–∞—Ñ ‚Äì –∫–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤–Ω–æ –æ–±—â–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-yellow-400">‚Ä¢</span>
                <span>56% –≤—Å–µ—Ö –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —è–¥—Ä–æ–º</span>
              </li>
            </ul>
          </div>
          <div class="bg-deep-space/50 p-6 rounded-lg">
            <h4 class="font-heading font-bold text-sm text-starlight mb-3">–¢–æ–ø –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏:</h4>
            <ol class="space-y-2 text-sm text-slate-300">
              <li>1. <span class="text-yellow-400">Andrii ‚Üí –ê—Ä—Ç—É—Ä:</span> 365</li>
              <li>2. <span class="text-yellow-400">–¢–µ–π–º—É—Ä ‚Üí –ê—Ä—Ç—É—Ä:</span> 362</li>
              <li>3. <span class="text-yellow-400">Stanislav ‚Üí Andrii:</span> 356</li>
              <li>4. <span class="text-yellow-400">Andrii ‚Üí Stanislav:</span> 334</li>
              <li>5. <span class="text-yellow-400">–ê—Ä—Ç—É—Ä ‚Üí –¢–µ–π–º—É—Ä:</span> 289</li>
            </ol>
          </div>
        </div>
      </div>

      <!-- Level 1: Inner Circle -->
      <div class="bento-card p-8 border-l-4 border-telegram-blue">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üîó</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–£—Ä–æ–≤–µ–Ω—å 1: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ö—Ä—É–≥</h3>
            <p class="text-slate-400 text-sm mb-3">–¢–æ–ø-5 —Å–≤—è–∑–µ–π –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞ —è–¥—Ä–∞ ‚Äì –º–æ—Å—Ç—ã –∏ —É—Å–∏–ª–∏—Ç–µ–ª–∏</p>
          </div>
        </div>
        <div class="grid md:grid-cols-3 gap-4 mb-6">
          {{- range first 6 .Site.Data.profiles.level_1 -}}
          {{ partial "components/profile-card.html" (dict "profile" . "variant" "level-1") }}
          {{- end -}}
        </div>
        <div class="bg-telegram-blue/10 p-5 rounded-lg border border-telegram-blue/30">
          <h4 class="font-heading font-bold text-starlight mb-3 flex items-center gap-2">
            <span class="text-xl">üí°</span>
            –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
          </h4>
          <p class="text-slate-300 text-sm mb-2">
            –£—Ä–æ–≤–µ–Ω—å 1 ‚Äì —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ "–±—É—Ñ–µ—Ä" –º–µ–∂–¥—É —è–¥—Ä–æ–º –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏. –≠—Ç–æ <strong class="text-telegram-blue">—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Å—É–±–≥—Ä–∞—Ñ</strong> —Å –≤—ã—Å–æ–∫–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–Ω–æ—Å—Ç—å—é.
          </p>
          <p class="text-slate-400 text-xs">
            –ü—Ä–∏–º–µ—Ä—ã: Arthur pandev.io ‚Üî –ê–Ω—Ç–æ–Ω (59), Azat ‚Üî Tair (62), Vassiliy ‚Üî –ê–Ω—Ç–æ–Ω (47) ‚Äì —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ –æ–±—â–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π ‚≠ê
          </p>
        </div>
      </div>

      <!-- Level 2: Extended Network -->
      <div class="bento-card p-8 border-l-4 border-ai-purple-start">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üåê</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–£—Ä–æ–≤–µ–Ω—å 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –°–µ—Ç—å</h3>
            <p class="text-slate-400 text-sm mb-3">–°–≤—è–∑–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –£—Ä–æ–≤–Ω—è 1 ‚Äì –Ω–æ–≤—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è</p>
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <p class="text-slate-300 mb-4">
              –õ—é–¥–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –∞–∫—Ç–∏–≤–Ω–æ –æ–±—â–∞—é—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–∏ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ö—Ä—É–≥–∞. –≠—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–µ—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —è–¥—Ä–∞.
            </p>
            <h4 class="font-heading font-bold text-sm text-starlight mb-3">–ö–ª—é—á–µ–≤—ã–µ –ø–æ–¥–∫–ª–∞—Å—Ç–µ—Ä—ã:</h4>
            <ul class="space-y-3 text-sm text-slate-300">
              <li class="flex items-start gap-2">
                <span class="text-ai-purple-start">‚Ä¢</span>
                <div>
                  <strong>–ö–ª–∞—Å—Ç–µ—Ä Arthur pandev.io:</strong>
                  <div class="text-xs text-slate-400 mt-1">–ê–Ω—Ç–æ–Ω (59) ‚≠ê, Dmitriy (54) ‚≠ê, Vassiliy (28) ‚≠ê, Denis (19)</div>
                </div>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-ai-purple-start">‚Ä¢</span>
                <div>
                  <strong>–ö–ª–∞—Å—Ç–µ—Ä Azat Jalilov:</strong>
                  <div class="text-xs text-slate-400 mt-1">Tair (62) ‚≠ê, Nurlan (42) ‚≠ê, Vassiliy (35) ‚≠ê, Zhanar (24)</div>
                </div>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-ai-purple-start">‚Ä¢</span>
                <div>
                  <strong>–ö–ª–∞—Å—Ç–µ—Ä Vassiliy:</strong>
                  <div class="text-xs text-slate-400 mt-1">–ê–Ω—Ç–æ–Ω (47) ‚≠ê, Azat (35) ‚≠ê, Arthur p. (28) ‚≠ê, Daulet (21)</div>
                </div>
              </li>
            </ul>
          </div>
          <div class="bg-deep-space/50 p-6 rounded-lg">
            <h4 class="font-heading font-bold text-sm text-starlight mb-4">–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–µ—Ç–∏</h4>
            <div class="space-y-4 text-sm">
              <div>
                <div class="flex items-center gap-2 mb-1">
                  <span class="text-green-400">‚úì</span>
                  <strong class="text-starlight">–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å</strong>
                </div>
                <p class="text-slate-400 text-xs pl-6">
                  –£—Ä–æ–≤–µ–Ω—å 1 –∞–∫—Ç–∏–≤–Ω–æ –æ–±—â–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π ‚Äì —ç—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —è–¥—Ä–∞
                </p>
              </div>
              <div>
                <div class="flex items-center gap-2 mb-1">
                  <span class="text-green-400">‚úì</span>
                  <strong class="text-starlight">–¢—Ä–æ–π–Ω–∞—è —Ä–æ–ª—å</strong>
                </div>
                <p class="text-slate-400 text-xs pl-6">
                  Vassiliy, Dmitriy, Azat, –ê–Ω—Ç–æ–Ω ‚Äì —Å–≤—è–∑–∞–Ω—ã —Å —è–¥—Ä–æ–º + –º–µ–∂–¥—É —Å–æ–±–æ–π + —Å –Ω–æ–≤—ã–º–∏ –ª—é–¥—å–º–∏
                </p>
              </div>
              <div>
                <div class="flex items-center gap-2 mb-1">
                  <span class="text-green-400">‚úì</span>
                  <strong class="text-starlight">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏</strong>
                </div>
                <p class="text-slate-400 text-xs pl-6">
                  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º —á–ª–µ–Ω–µ —è–¥—Ä–∞ (—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫—É—Å—Å–∏–∏)
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Network Stats -->
    <div class="bento-card p-8 mt-12 bg-gradient-to-br from-yellow-400/10 to-telegram-blue/10 border-2 border-yellow-400/30">
      <h3 class="font-heading font-bold text-2xl text-starlight mb-6 text-center">–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-slate-700">
              <th class="text-left py-3 px-4 font-heading text-starlight">–£—Ä–æ–≤–µ–Ω—å</th>
              <th class="text-center py-3 px-4 font-heading text-starlight">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
              <th class="text-center py-3 px-4 font-heading text-starlight">% –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö</th>
              <th class="text-left py-3 px-4 font-heading text-starlight">–†–æ–ª—å</th>
            </tr>
          </thead>
          <tbody class="text-slate-300">
            <tr class="border-b border-slate-800">
              <td class="py-3 px-4"><span class="text-yellow-400">‚óè</span> –£—Ä–æ–≤–µ–Ω—å 0 (–Ø–¥—Ä–æ)</td>
              <td class="text-center py-3 px-4 font-data">4 —á–µ–ª</td>
              <td class="text-center py-3 px-4 font-data">2.8%</td>
              <td class="py-3 px-4 text-slate-400">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞</td>
            </tr>
            <tr class="border-b border-slate-800">
              <td class="py-3 px-4"><span class="text-telegram-blue">‚óè</span> –£—Ä–æ–≤–µ–Ω—å 1 (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)</td>
              <td class="text-center py-3 px-4 font-data">10 —á–µ–ª</td>
              <td class="text-center py-3 px-4 font-data">7.1%</td>
              <td class="py-3 px-4 text-slate-400">–£—Å–∏–ª–∏—Ç–µ–ª–∏ –∏ –º–æ—Å—Ç—ã</td>
            </tr>
            <tr class="border-b border-slate-800">
              <td class="py-3 px-4"><span class="text-ai-purple-start">‚óè</span> –£—Ä–æ–≤–µ–Ω—å 2 (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)</td>
              <td class="text-center py-3 px-4 font-data">10+ —á–µ–ª</td>
              <td class="text-center py-3 px-4 font-data">7.1%+</td>
              <td class="py-3 px-4 text-slate-400">–ù–æ–≤—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏</td>
            </tr>
            <tr class="font-bold">
              <td class="py-3 px-4 text-starlight">–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ</td>
              <td class="text-center py-3 px-4 font-data text-starlight">24+ —á–µ–ª</td>
              <td class="text-center py-3 px-4 font-data text-starlight">~17%</td>
              <td class="py-3 px-4 text-starlight">–ê–∫—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p class="text-center text-slate-400 text-sm mt-6">
        –í—Å–µ–≥–æ <strong class="text-starlight">~24 —á–µ–ª–æ–≤–µ–∫–∞</strong> (17%) —Å–æ–∑–¥–∞—é—Ç <strong class="text-starlight">–±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</strong> –≤ —á–∞—Ç–µ
      </p>
    </div>

    <!-- Recommendations by Level -->
    <div class="grid md:grid-cols-3 gap-6 mt-12">
      <div class="bento-card p-6 border-t-4 border-yellow-400">
        <h4 class="font-heading font-bold text-lg text-starlight mb-3">–î–ª—è –£—Ä–æ–≤–Ω—è 0</h4>
        <ul class="space-y-2 text-sm text-slate-300">
          <li class="flex items-start gap-2">
            <span class="text-green-400">‚úì</span>
            <span>–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-yellow-400">‚ö†</span>
            <span>–î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –£—Ä–æ–≤–Ω—é 1</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-telegram-blue">‚Üí</span>
            <span>–ê–∫—Ç–∏–≤–Ω–æ –≤–æ–≤–ª–µ–∫–∞—Ç—å –£—Ä–æ–≤–µ–Ω—å 2</span>
          </li>
        </ul>
      </div>
      <div class="bento-card p-6 border-t-4 border-telegram-blue">
        <h4 class="font-heading font-bold text-lg text-starlight mb-3">–î–ª—è –£—Ä–æ–≤–Ω—è 1</h4>
        <ul class="space-y-2 text-sm text-slate-300">
          <li class="flex items-start gap-2">
            <span class="text-green-400">‚úì</span>
            <span>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-management-orange-start">üöÄ</span>
            <span>–†–∞–∑–≤–∏–≤–∞—Ç—å –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-telegram-blue">‚Üí</span>
            <span>–ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö –∏–∑ –£—Ä–æ–≤–Ω—è 2</span>
          </li>
        </ul>
      </div>
      <div class="bento-card p-6 border-t-4 border-ai-purple-start">
        <h4 class="font-heading font-bold text-lg text-starlight mb-3">–î–ª—è –£—Ä–æ–≤–Ω—è 2</h4>
        <ul class="space-y-2 text-sm text-slate-300">
          <li class="flex items-start gap-2">
            <span class="text-green-400">‚úì</span>
            <span>–ê–∫—Ç–∏–≤–Ω–µ–µ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –¥–∏—Å–∫—É—Å—Å–∏—è—Ö</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-management-orange-start">üöÄ</span>
            <span>–°—Ç—Ä–æ–∏—Ç—å —Å–≤—è–∑–∏ —Å –£—Ä–æ–≤–Ω–µ–º 1</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-telegram-blue">‚Üí</span>
            <span>–ü—Ä–∏–≥–ª–∞—à–∞—Ç—å –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- Connection Patterns -->
<section class="relative py-16 px-4">
  <div class="container mx-auto max-w-7xl">
    <h2 class="text-3xl md:text-4xl font-heading font-bold text-center mb-12 text-starlight">
      –ü–∞—Ç—Ç–µ—Ä–Ω—ã <span class="text-gradient-management">–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π</span>
    </h2>

    <div class="grid md:grid-cols-2 gap-8">
      <div class="bento-card p-8 border-l-4 border-yellow-400">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üåü</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–ó–≤—ë–∑–¥—ã —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</h3>
            <p class="text-slate-400 text-sm mb-3">Star topology pattern</p>
          </div>
        </div>
        <p class="text-slate-300 mb-4">
          –ë–æ–ª—å—à–∞—è –ß–µ—Ç–≤—ë—Ä–∫–∞ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ "—Ö–∞–±—ã" ‚Äì –æ–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∏–Ω–∏—Ü–∏–∏—Ä—É—é—Ç –¥–∏—Å–∫—É—Å—Å–∏–∏, —Å–≤—è–∑—ã–≤–∞—é—Ç –ª—é–¥–µ–π.
        </p>
        <ul class="space-y-2 text-slate-300 text-sm">
          <li class="flex items-start gap-2">
            <span class="text-yellow-400">‚Ä¢</span>
            <span><strong>Andrii Kurdiumov:</strong> 6 300 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-yellow-400">‚Ä¢</span>
            <span><strong>–ê—Ä—Ç—É—Ä –ü–∞–Ω:</strong> 4 400 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-yellow-400">‚Ä¢</span>
            <span><strong>–¢–µ–π–º—É—Ä –®–∞–π–∫–µ–º–µ–ª–æ–≤:</strong> 3 100 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-yellow-400">‚Ä¢</span>
            <span><strong>Stanislav Belyaev:</strong> 3 000 —Å–æ–æ–±—â–µ–Ω–∏–π</span>
          </li>
        </ul>
      </div>

      <div class="bento-card p-8 border-l-4 border-telegram-blue">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üîó</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–ö–ª–∞—Å—Ç–µ—Ä—ã –ø–æ —Ç–µ–º–∞–º</h3>
            <p class="text-slate-400 text-sm mb-3">Topic-based communities</p>
          </div>
        </div>
        <p class="text-slate-300 mb-4">
          –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ —Ç–µ–º: AI-—ç–Ω—Ç—É–∑–∏–∞—Å—Ç—ã, QA-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã, HR-–ª–∏–¥—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä—ã.
        </p>
        <ul class="space-y-2 text-slate-300 text-sm">
          <li class="flex items-start gap-2">
            <span class="text-ai-purple-start">‚Ä¢</span>
            <span><strong>AI –∫–ª–∞—Å—Ç–µ—Ä:</strong> 976 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-telegram-blue">‚Ä¢</span>
            <span><strong>QA –∫–ª–∞—Å—Ç–µ—Ä:</strong> 940 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-management-orange-start">‚Ä¢</span>
            <span><strong>Management –∫–ª–∞—Å—Ç–µ—Ä:</strong> 499 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-green-400">‚Ä¢</span>
            <span><strong>HR –∫–ª–∞—Å—Ç–µ—Ä:</strong> 482 —É–ø–æ–º–∏–Ω–∞–Ω–∏—è</span>
          </li>
        </ul>
      </div>

      <div class="bento-card p-8 border-l-4 border-green-400">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üìÖ</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã</h3>
            <p class="text-slate-400 text-sm mb-3">Time-based activity</p>
          </div>
        </div>
        <p class="text-slate-300 mb-4">
          –ü–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Äì —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ (–ü–Ω-–ü—Ç). –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –ª–∏–¥–∏—Ä—É–µ—Ç —Å 22% –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
        </p>
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div class="p-3 bg-deep-space/50 rounded-lg">
            <div class="font-data text-lg text-management-orange-start mb-1">22%</div>
            <div class="text-slate-400">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</div>
          </div>
          <div class="p-3 bg-deep-space/50 rounded-lg">
            <div class="font-data text-lg text-telegram-blue mb-1">11:00</div>
            <div class="text-slate-400">–ü–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
          </div>
        </div>
      </div>

      <div class="bento-card p-8 border-l-4 border-ai-purple-start">
        <div class="flex items-start gap-4 mb-4">
          <div class="text-5xl">üéì</div>
          <div class="flex-1">
            <h3 class="font-heading font-bold text-2xl text-starlight mb-2">–ù–æ–≤–∏—á–∫–∏ ‚Üí –≠–∫—Å–ø–µ—Ä—Ç—ã</h3>
            <p class="text-slate-400 text-sm mb-3">Onboarding flow</p>
          </div>
        </div>
        <p class="text-slate-300 mb-4">
          –ó–¥–æ—Ä–æ–≤–∞—è –¥–∏–Ω–∞–º–∏–∫–∞: –Ω–æ–≤–∏—á–∫–∏ –∑–∞–¥–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã (19% –≤ —è–Ω–≤–∞—Ä–µ), —ç–∫—Å–ø–µ—Ä—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤—Å–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.
        </p>
        <p class="text-slate-400 text-sm">
          –ö –¥–µ–∫–∞–±—Ä—é –ø—Ä–æ—Ü–µ–Ω—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ 13% ‚Äì –ø—Ä–∏–∑–Ω–∞–∫ –∑—Ä–µ–ª–æ—Å—Ç–∏.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Community Health -->
<section class="relative py-16 px-4 bg-gradient-to-b from-deep-space/50 to-transparent">
  <div class="container mx-auto max-w-6xl">
    <h2 class="text-3xl md:text-4xl font-heading font-bold text-center mb-12 text-starlight">
      –ó–¥–æ—Ä–æ–≤—å–µ <span class="text-gradient-ai">–°–µ—Ç–∏</span>
    </h2>

    <div class="grid md:grid-cols-2 gap-8">
      <div class="bento-card p-8">
        <div class="text-5xl mb-4">üí™</div>
        <h3 class="font-heading font-bold text-xl text-starlight mb-3">–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h3>
        <ul class="space-y-3 text-slate-300">
          <li class="flex items-start gap-3">
            <span class="text-green-400 text-xl">‚úì</span>
            <div>
              <strong>–ê–∫—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ:</strong> –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-green-400 text-xl">‚úì</span>
            <div>
              <strong>–†–æ—Å—Ç —Å–µ—Ç–∏:</strong> +112% —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞ –≥–æ–¥, —É—Å—Ç–æ–π—á–∏–≤—ã–π —Ç—Ä–µ–Ω–¥
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-green-400 text-xl">‚úì</span>
            <div>
              <strong>–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ:</strong> 8+ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ —Ç–µ–º–∞–º, —à–∏—Ä–æ–∫–∏–π –æ—Ö–≤–∞—Ç
            </div>
          </li>
        </ul>
      </div>

      <div class="bento-card p-8">
        <div class="text-5xl mb-4">‚ö†Ô∏è</div>
        <h3 class="font-heading font-bold text-xl text-starlight mb-3">–†–∏—Å–∫–∏</h3>
        <ul class="space-y-3 text-slate-300">
          <li class="flex items-start gap-3">
            <span class="text-yellow-400 text-xl">!</span>
            <div>
              <strong>–í—ã—Å–æ–∫–∞—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è:</strong> 63% —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç 4 —á–µ–ª–æ–≤–µ–∫ ‚Äì –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-yellow-400 text-xl">!</span>
            <div>
              <strong>Lurkers:</strong> 84 —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å <10 —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äì –ø–∞—Å—Å–∏–≤–Ω—ã–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏
            </div>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-yellow-400 text-xl">!</span>
            <div>
              <strong>–í—ã–≥–æ—Ä–∞–Ω–∏–µ –ª–∏–¥–µ—Ä–æ–≤:</strong> –ù—É–∂–Ω–æ —Ä–∞—Å—Ç–∏—Ç—å –Ω–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Recommendations -->
    <div class="bento-card p-8 mt-8 border-2 border-telegram-blue/30">
      <h3 class="font-heading font-bold text-2xl text-starlight mb-6 text-center">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–æ—Å—Ç–∞</h3>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="text-center">
          <div class="text-4xl mb-3">üå±</div>
          <h4 class="font-heading font-bold text-lg text-starlight mb-2">–í—ã—Ä–∞—â–∏–≤–∞–π—Ç–µ –Ω–æ–≤—ã—Ö –ª–∏–¥–µ—Ä–æ–≤</h4>
          <p class="text-slate-400 text-sm">–î–µ–ª–µ–≥–∏—Ä—É–π—Ç–µ –º–æ–¥–µ—Ä–∞—Ü–∏—é, –ø–æ–æ—â—Ä—è–π—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-3">üéØ</div>
          <h4 class="font-heading font-bold text-lg text-starlight mb-2">–ê–∫—Ç–∏–≤–∏–∑–∏—Ä—É–π—Ç–µ lurkers</h4>
          <p class="text-slate-400 text-sm">–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–æ—Å—ã, –ø—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥–µ–ª–∏—Ç—å—Å—è –æ–ø—ã—Ç–æ–º</p>
        </div>
        <div class="text-center">
          <div class="text-4xl mb-3">üîó</div>
          <h4 class="font-heading font-bold text-lg text-starlight mb-2">–£–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–≤—è–∑–∏</h4>
          <p class="text-slate-400 text-sm">–û—Ñ–ª–∞–π–Ω –≤—Å—Ç—Ä–µ—á–∏, –≤–æ—Ä–∫—à–æ–ø—ã, —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Network Visualization Script -->
<script>
(function() {
  const svg = document.getElementById('network-svg');
  if (!svg) return;

  const width = svg.clientWidth;
  const height = svg.clientHeight || 600;

  // Network data: representing the community structure with avatars
  const nodes = [
    // Level 0: Big Four (center nodes)
    { id: 'ak', name: 'Andrii K.', size: 30, group: 'bigfour', x: width/2 - 100, y: height/2 - 80, connections: 411, avatar: '/images/avatars/andrii.png' },
    { id: 'ap', name: '–ê—Ä—Ç—É—Ä –ü.', size: 26, group: 'bigfour', x: width/2 + 100, y: height/2 - 80, connections: 365, avatar: '/images/avatars/artur.png' },
    { id: 'ts', name: '–¢–µ–π–º—É—Ä –®.', size: 24, group: 'bigfour', x: width/2 - 100, y: height/2 + 80, connections: 362, avatar: '/images/avatars/teymur.png' },
    { id: 'sb', name: 'Stanislav B.', size: 24, group: 'bigfour', x: width/2 + 100, y: height/2 + 80, connections: 356, avatar: '/images/avatars/stanislav.png' },

    // Level 1: Inner Circle (medium nodes)
    { id: 'vas', name: 'Vassiliy', size: 18, group: 'active', x: width/2 - 200, y: height/2 - 160, connections: 411, avatar: '/images/avatars/vassiliy.png' },
    { id: 'dm', name: 'Dmitriy M.', size: 16, group: 'active', x: width/2 + 200, y: height/2 - 160, connections: 183, avatar: '/images/avatars/dmitriy.png' },
    { id: 'anton', name: '–ê–Ω—Ç–æ–Ω', size: 17, group: 'active', x: width/2 - 260, y: height/2, connections: 185, avatar: '/images/avatars/anton.png' },
    { id: 'azat', name: 'Azat J.', size: 16, group: 'active', x: width/2 + 260, y: height/2, connections: 154, avatar: '/images/avatars/azat.png' },
        { id: 'tair', name: 'Tair S.', size: 14, group: 'active', x: width/2 + 200, y: height/2 + 160, connections: 135, avatar: '/images/avatars/tair.png' },
    { id: 'nurlan', name: 'Nurlan N.', size: 13, group: 'active', x: width/2 - 150, y: height/2 - 230, connections: 115, avatar: '/images/avatars/nurlan.png' },
    { id: 'egor', name: 'Egor', size: 12, group: 'active', x: width/2 + 150, y: height/2 - 230, connections: 82, avatar: '/images/avatars/egor.png' },
    { id: 'maxim', name: 'Maxim G.', size: 12, group: 'active', x: width/2, y: height/2 + 240, connections: 71, avatar: '/images/avatars/maxim.png' },
    { id: 'tolegen', name: 'T–æŒª–µ–≥–µ–Ω', size: 11, group: 'active', x: width/2, y: height/2 - 240, connections: 67, avatar: '/images/avatars/tolegen.png' },

    // Level 2: Extended Network (small nodes)
    { id: 'denis', name: 'Denis', size: 9, group: 'participant', x: width/2 - 320, y: height/2 - 100, connections: 32, avatar: '/images/avatars/denis.png' },
    { id: 'zhanar', name: 'Zhanar M.', size: 9, group: 'participant', x: width/2 - 340, y: height/2 + 50, connections: 24, avatar: '/images/avatars/zhanar.png' },
    { id: 'daulet', name: 'Daulet', size: 9, group: 'participant', x: width/2 + 320, y: height/2 - 100, connections: 21, avatar: '/images/avatars/daulet.png' },
    { id: 'iztleu', name: 'Iztleu D.', size: 8, group: 'participant', x: width/2 + 340, y: height/2 + 50, connections: 20, avatar: '/images/avatars/iztleu.png' },
    { id: 'alex', name: 'Alex D.', size: 8, group: 'participant', x: width/2 - 280, y: height/2 + 200, connections: 18, avatar: '/images/avatars/alex.png' },
    { id: 'rodion', name: 'Rodion M.', size: 8, group: 'participant', x: width/2 + 280, y: height/2 + 200, connections: 15, avatar: '/images/avatars/rodion.png' },

    // Periphery (tiny nodes - no avatars)
    { id: 'o1', name: '–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è', size: 6, group: 'observer', x: width/2 - 370, y: height/2 - 190 },
    { id: 'o2', name: '–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è', size: 6, group: 'observer', x: width/2 + 370, y: height/2 - 190 },
    { id: 'o3', name: '–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è', size: 6, group: 'observer', x: width/2 - 370, y: height/2 + 190 },
    { id: 'o4', name: '–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è', size: 6, group: 'observer', x: width/2 + 370, y: height/2 + 190 }
  ];

  // Links between nodes
  const links = [
    // Level 0: Big Four interconnections (full mesh)
    { source: 'ak', target: 'ap' }, { source: 'ak', target: 'ts' }, { source: 'ak', target: 'sb' },
    { source: 'ap', target: 'ts' }, { source: 'ap', target: 'sb' }, { source: 'ts', target: 'sb' },

    // Level 1 to Big Four (based on top connections)
    { source: 'vas', target: 'ak' }, { source: 'vas', target: 'ts' }, { source: 'vas', target: 'sb' },
    { source: 'dm', target: 'ak' }, { source: 'dm', target: 'ts' }, { source: 'dm', target: 'sb' },
    { source: 'anton', target: 'ak' }, { source: 'anton', target: 'sb' },
    { source: 'azat', target: 'ap' }, { source: 'azat', target: 'sb' }, { source: 'azat', target: 'ts' },
        { source: 'tair', target: 'ak' }, { source: 'tair', target: 'sb' }, { source: 'tair', target: 'ts' },
    { source: 'nurlan', target: 'ak' }, { source: 'nurlan', target: 'ap' },
    { source: 'egor', target: 'sb' }, { source: 'egor', target: 'ts' },
    { source: 'maxim', target: 'ak' }, { source: 'maxim', target: 'ts' },
    { source: 'tolegen', target: 'ap' },

    // Level 1 internal connections (key subgraph)
        { source: 'azat', target: 'tair' }, { source: 'azat', target: 'nurlan' }, { source: 'azat', target: 'vas' },
    { source: 'vas', target: 'anton' },

    // Level 2 to Level 1
    { source: 'denis', target: 'ap' }, { source: 'denis', target: 'dm' },
    { source: 'zhanar', target: 'azat' },
    { source: 'daulet', target: 'vas' },
    { source: 'iztleu', target: 'vas' },
    { source: 'alex', target: 'ap' },
    { source: 'rodion', target: 'maxim' },

    // Periphery to core
    { source: 'o1', target: 'vas' }, { source: 'o2', target: 'dm' },
    { source: 'o3', target: 'ap' }, { source: 'o4', target: 'azat' }
  ];

  // Color mapping for borders
  const colors = {
    bigfour: '#EAB308',    // Yellow
    active: '#2481CC',     // Telegram Blue
    participant: '#A855F7', // Purple
    observer: '#64748B'    // Gray
  };

  // Create defs for clip paths
  const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
  nodes.forEach(node => {
    if (node.avatar) {
      const clipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');
      clipPath.setAttribute('id', 'clip-' + node.id);
      const clipCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      clipCircle.setAttribute('cx', node.x);
      clipCircle.setAttribute('cy', node.y);
      clipCircle.setAttribute('r', node.size);
      clipPath.appendChild(clipCircle);
      defs.appendChild(clipPath);
    }
  });
  svg.appendChild(defs);

  // Draw links
  links.forEach(link => {
    const source = nodes.find(n => n.id === link.source);
    const target = nodes.find(n => n.id === link.target);

    if (source && target) {
      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      line.setAttribute('x1', source.x);
      line.setAttribute('y1', source.y);
      line.setAttribute('x2', target.x);
      line.setAttribute('y2', target.y);
      line.setAttribute('stroke', 'rgba(148, 163, 184, 0.3)');
      line.setAttribute('stroke-width', '1.5');
      svg.appendChild(line);
    }
  });

  // Draw nodes
  nodes.forEach(node => {
    const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    g.style.cursor = 'pointer';

    if (node.avatar) {
      // Draw border circle first
      const borderCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      borderCircle.setAttribute('cx', node.x);
      borderCircle.setAttribute('cy', node.y);
      borderCircle.setAttribute('r', node.size + 3);
      borderCircle.setAttribute('fill', 'none');
      borderCircle.setAttribute('stroke', colors[node.group]);
      borderCircle.setAttribute('stroke-width', '3');
      g.appendChild(borderCircle);

      // Draw avatar image
      const image = document.createElementNS('http://www.w3.org/2000/svg', 'image');
      image.setAttribute('x', node.x - node.size);
      image.setAttribute('y', node.y - node.size);
      image.setAttribute('width', node.size * 2);
      image.setAttribute('height', node.size * 2);
      image.setAttribute('href', node.avatar);
      image.setAttribute('clip-path', 'url(#clip-' + node.id + ')');
      image.setAttribute('preserveAspectRatio', 'xMidYMid slice');
      g.appendChild(image);
    } else {
      // Draw colored circle for nodes without avatars
      const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      circle.setAttribute('cx', node.x);
      circle.setAttribute('cy', node.y);
      circle.setAttribute('r', node.size);
      circle.setAttribute('fill', colors[node.group]);
      circle.setAttribute('opacity', '0.7');
      circle.setAttribute('stroke', '#fff');
      circle.setAttribute('stroke-width', '1');
      g.appendChild(circle);
    }

    // Tooltip
    const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
    title.textContent = node.name + (node.connections ? ' (' + node.connections + ' —Å–≤—è–∑–µ–π)' : '');
    g.appendChild(title);

    // Hover effect
    g.addEventListener('mouseenter', function() {
      this.style.transform = 'scale(1.1)';
      this.style.transformOrigin = node.x + 'px ' + node.y + 'px';
    });
    g.addEventListener('mouseleave', function() {
      this.style.transform = 'scale(1)';
    });

    svg.appendChild(g);

    // Labels for Big Four and Level 1 (Active)
    if (node.group === 'bigfour' || node.group === 'active') {
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', node.x);
      text.setAttribute('y', node.y + node.size + 18);
      text.setAttribute('text-anchor', 'middle');
      text.setAttribute('fill', '#F8FAFC');
      text.setAttribute('font-size', node.group === 'bigfour' ? '12' : '10');
      text.setAttribute('font-weight', node.group === 'bigfour' ? 'bold' : 'normal');
      text.setAttribute('font-family', 'Inter');
      text.textContent = node.name;
      svg.appendChild(text);
    }

    // Labels for Level 2 (Participants) - smaller font
    if (node.group === 'participant') {
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', node.x);
      text.setAttribute('y', node.y + node.size + 14);
      text.setAttribute('text-anchor', 'middle');
      text.setAttribute('fill', '#94A3B8');
      text.setAttribute('font-size', '8');
      text.setAttribute('font-family', 'Inter');
      text.textContent = node.name;
      svg.appendChild(text);
    }
  });
})();
</script>

{{ end }}
