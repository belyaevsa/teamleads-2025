{{ define "main" }}

<!-- Hero Section -->
<div id="hero">
{{ partial "components/hero.html" . }}
</div>

<!-- Key Metrics Section -->
<section id="metrics" class="relative py-20 px-4">
  <div class="container mx-auto max-w-7xl">

    <h2 class="text-4xl md:text-5xl font-heading font-bold text-center mb-4 text-starlight">
      –ú–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ <span class="text-gradient-ai">–∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ</span>
    </h2>
    <p class="text-center text-slate-400 mb-16 max-w-2xl mx-auto">
      –ì–æ–¥ –≤ —Ü–∏—Ñ—Ä–∞—Ö. –ù–∏–∫–∞–∫–∏—Ö –≤–∞–Ω–∏–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ ‚Äì —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.
    </p>

    <!-- Metrics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

      <!-- Card 1: Total Messages -->
      <div class="bento-card p-8 group">
        <div class="text-5xl mb-4">üí¨</div>
        <div class="font-data text-5xl font-bold text-starlight mb-2" data-count="26 600">0</div>
        <div class="text-slate-400 text-lg mb-4">–∫–æ–º–º–∏—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥</div>
        <a href="#overview" class="text-telegram-blue text-sm hover:underline inline-flex items-center gap-1">
          ‚Üí –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
        </a>
      </div>

      <!-- Card 2: Active Contributors -->
      <div class="bento-card p-8 group">
        <div class="text-5xl mb-4">üë•</div>
        <div class="font-data text-5xl font-bold text-starlight mb-2" data-count="139">0</div>
        <div class="text-slate-400 text-lg mb-4">–∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–µ—Ä–æ–≤</div>
        <a href="#people" class="text-management-orange-start text-sm hover:underline inline-flex items-center gap-1">
          ‚Üí –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏
        </a>
      </div>

      <!-- Card 3: Top Topic -->
      <div class="bento-card p-8 group">
        <div class="text-5xl mb-4">ü§ñ</div>
        <div class="font-heading text-3xl font-bold text-gradient-ai mb-2">AI & ML</div>
        <div class="text-slate-400 text-lg mb-4">–•–∞–π–ø –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</div>
        <a href="#topics" class="text-telegram-blue text-sm hover:underline inline-flex items-center gap-1">
          ‚Üí –í—Å–µ —Ç–µ–º—ã
        </a>
      </div>

      <!-- Card 4: Community Sentiment -->
      <div class="bento-card p-8 group">
        <div class="text-5xl mb-4">üòå</div>
        <div class="font-data text-5xl font-bold text-starlight mb-2" data-count="70">0</div>
        <div class="text-slate-400 text-lg mb-4">% —Å–ø–æ–∫–æ–π–Ω—ã—Ö</div>
        <a href="#sentiment" class="text-telegram-blue text-sm hover:underline inline-flex items-center gap-1">
          ‚Üí –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
        </a>
      </div>

    </div>
  </div>
</section>

<!-- Big Four Preview Section -->
<section id="big-four" class="relative py-20 px-4 bg-gradient-to-b from-transparent to-deep-space/50">
  <div class="container mx-auto max-w-7xl">

    <h2 class="text-4xl md:text-5xl font-heading font-bold text-center mb-4 text-starlight">
      <span class="text-gradient-management">–ë–æ–ª—å—à–∞—è –ß–µ—Ç–≤—ë—Ä–∫–∞</span>
    </h2>
    <p class="text-center text-slate-400 mb-16 max-w-2xl mx-auto">
      –¢–æ–ø-4 –ø–æ –∫–æ–º–º–∏—Ç–∞–º –≤ —á–∞—Ç. –¢–µ, –∫—Ç–æ –¥–µ—Ä–∂–∏—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.
    </p>

    <!-- Big Four Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {{- range .Site.Data.profiles.big_four -}}
      {{ partial "components/profile-card.html" (dict "profile" . "variant" "big-four") }}
      {{- end -}}
    </div>

    <div class="text-center mt-12">
      <a href="/people" class="inline-flex items-center gap-2 px-8 py-4 bento-card hover:border-telegram-blue/50 transition-all">
        <span class="text-lg text-starlight">‚Üí –í—Å–µ –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–µ—Ä—ã —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</span>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>

  </div>
</section>

<!-- Timeline Infographic -->
{{ partial "infographics/timeline.html" . }}

<!-- Topic Cloud -->
{{ partial "infographics/topic-cloud.html" . }}

<!-- Sentiment Overview Donut -->
{{ partial "infographics/sentiment-donut.html" . }}

<!-- Day of Week Activity -->
{{ partial "infographics/day-of-week.html" . }}

<!-- CTA: Join Telegram Community -->
{{ partial "components/cta-telegram.html" . }}

<!-- Count-up Animation Script -->
<script>
  // Count-up animation for numbers
  function animateCount(element, target, duration = 2000) {
    const start = 0;
    const increment = target / (duration / 16);
    let current = start;

    const timer = setInterval(() => {
      current += increment;
      if (current >= target) {
        element.textContent = target.toLocaleString('ru-RU');
        clearInterval(timer);
      } else {
        element.textContent = Math.floor(current).toLocaleString('ru-RU');
      }
    }, 16);
  }

  // Intersection Observer for triggering animations when scrolled into view
  const observerOptions = {
    threshold: 0.5,
    rootMargin: '0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting && !entry.target.classList.contains('counted')) {
        entry.target.classList.add('counted');
        const target = parseFloat(entry.target.getAttribute('data-count'));
        animateCount(entry.target, target);
      }
    });
  }, observerOptions);

  // Observe all count elements
  document.querySelectorAll('[data-count]').forEach(el => {
    observer.observe(el);
  });
</script>

{{ end }}
